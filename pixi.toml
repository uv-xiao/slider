[workspace]
authors = ["Youwei Xiao <shallwe@pku.edu.cn>"]
channels = ["conda-forge"]
name = "slider"
platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]
version = "0.1.0"

[tasks]
# v2: styled prompts -> images/pdf/image-pptx
make-artifacts = { cmd = "python .codex/skills/styled-artifacts/scripts/styled_prompts_to_artifacts.py" }

# pptx skill: install Node deps for html2pptx (editable PPTX)
# NOTE: set a local npm cache to avoid permission issues on ~/.npm
pptx-setup = { cmd = "ROOT=$PWD; cd .codex/skills/pptx && NPM_CONFIG_CACHE=$ROOT/.pixi/npm-cache npm install && NPM_CONFIG_CACHE=$ROOT/.pixi/npm-cache npx playwright install chromium" }

# pptx skill: visual thumbnail validation helper
# NOTE: still requires system `soffice` (LibreOffice) to be installed.
pptx-thumb = { cmd = "python .codex/skills/pptx/scripts/thumbnail.py" }

[dependencies]
python = "3.11.*"
requests = ">=2.32.5,<3"
pillow = ">=12.1.0,<13"
python-pptx = ">=1.0.2,<2"
markitdown = ">=0.1.4,<0.2"

# pptx skill (OOXML validation)
lxml = ">=5,<6"
defusedxml = ">=0.7,<0.8"

# Node runtime for html2pptx workflows (Node packages are installed via `pixi run pptx-setup`)
nodejs = ">=20,<25"

# Thumbnail conversion helper (pdftoppm)
poppler = "*"
